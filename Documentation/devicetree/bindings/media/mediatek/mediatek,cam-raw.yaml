# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
# Copyright (c) 2023 MediaTek Inc.

%YAML 1.2
---
$id: "http://devicetree.org/schemas/media/mediatek,cam-raw.yaml#"
$schema: "http://devicetree.org/meta-schemas/core.yaml#"

title: The cam-raw unit of Mediatek ISP system

maintainers:
  - MTK ISD <MTK_ISD_SW2@mediatek.com>

description:
  MediaTek cam-raw is the ISP Pass1 unit in MediaTek SoC.

properties:
  compatible:
    const: mediatek,cam-raw

  "#address-cells":
    const: 2

  "#size-cells":
    const: 2

  ranges: true

  power-domains:
    maxItems: 1

  iommus:
    description:
      Points to the respective IOMMU block with master port as argument, see
      Documentation/devicetree/bindings/iommu/mediatek,iommu.yaml for details.
      Ports are according to the HW.

required:
  - compatible
  - reg
  - reg-names
  - ranges
  - interrupts
  - power-domains
  - clocks
  - clock-names
  - iommus

additionalProperties: false

examples:
  - |
    cam_raw_a@16030000 {
      compatible = "mediatek,cam-raw";
      reg = <0 0x16030000 0 0x8000>,
            <0 0x16038000 0 0x8000>;
      reg-names = "base", "inner_base";
      mediatek,cam-id = <0>;
      mediatek,larbs = <&larb16a>;
      interrupts = <GIC_SPI 300 IRQ_TYPE_LEVEL_HIGH 0>;
      dma-ranges = <0x2 0x0 0x0 0x40000000 0x1 0x0>;
      power-domains = <&spm MT8188_POWER_DOMAIN_CAM_SUBA>;
      clocks = <&camsys CLK_CAM_MAIN_CAM2MM0_GALS>,
          <&camsys CLK_CAM_MAIN_CAM2MM1_GALS>,
          <&camsys CLK_CAM_MAIN_CAM2SYS_GALS>,
          <&camsys CLK_CAM_MAIN_CAM>,
          <&camsys CLK_CAM_MAIN_CAMTG>,
          <&camsys_rawa CLK_CAM_RAWA_LARBX>,
          <&camsys_rawa CLK_CAM_RAWA_CAM>,
          <&camsys_rawa CLK_CAM_RAWA_CAMTG>,
          <&topckgen CLK_TOP_CAM>,
          <&topckgen CLK_TOP_CAMTG>,
          <&topckgen CLK_TOP_CAMTM>;
      clock-names = "camsys_cam2mm0_cgpdn",
          "camsys_cam2mm1_cgpdn",
          "camsys_cam2sys_cgpdn",
          "camsys_cam_cgpdn",
          "camsys_camtg_cgpdn",
          "camsys_rawa_larbx_cgpdn",
          "camsys_rawa_cam_cgpdn",
          "camsys_rawa_camtg_cgpdn",
          "topckgen_top_cam",
          "topckgen_top_camtg",
          "topckgen_top_camtm";
      assigned-clocks = <&topckgen CLK_TOP_CAM>;
      assigned-clock-parents = <&topckgen CLK_TOP_UNIVPLL_D5>;
      iommus = <&vpp_iommu M4U_PORT_L16A_IMGO_R1>,
          <&vpp_iommu M4U_PORT_L16A_CQI_R1>,
          <&vpp_iommu M4U_PORT_L16A_CQI_R2>,
          <&vpp_iommu M4U_PORT_L16A_BPCI_R1>,
          <&vpp_iommu M4U_PORT_L16A_LSCI_R1>,
          <&vpp_iommu M4U_PORT_L16A_RAWI_R2>,
          <&vpp_iommu M4U_PORT_L16A_RAWI_R3>,
          <&vpp_iommu M4U_PORT_L16A_UFDI_R2>,
          <&vpp_iommu M4U_PORT_L16A_UFDI_R3>,
          <&vpp_iommu M4U_PORT_L16A_RAWI_R4>,
          <&vpp_iommu M4U_PORT_L16A_RAWI_R5>,
          <&vpp_iommu M4U_PORT_L16A_AAI_R1>,
          <&vpp_iommu M4U_PORT_L16A_UFDI_R5>,
          <&vpp_iommu M4U_PORT_L16A_FHO_R1>,
          <&vpp_iommu M4U_PORT_L16A_AAO_R1>,
          <&vpp_iommu M4U_PORT_L16A_TSFSO_R1>,
          <&vpp_iommu M4U_PORT_L16A_FLKO_R1>;
    };

...
